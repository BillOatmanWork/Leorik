using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          123,  165,  102,  138,  125,  168,   97,   41,
           71,   73,  105,  105,  143,  148,  105,   72,
           59,   81,   79,  100,  101,   94,   94,   66,
           50,   59,   74,   86,   93,   86,   82,   59,
           53,   53,   67,   66,   77,   83,   95,   71,
           51,   65,   59,   70,   73,  106,  105,   70,
          100,  100,  100,  100,  100,  100,  100,  100,

          154,  241,  256,  267,  309,  235,  270,  201,
          243,  265,  385,  337,  329,  372,  302,  290,
          277,  370,  358,  382,  411,  426,  390,  348,
          306,  340,  335,  376,  355,  393,  343,  340,
          310,  326,  343,  334,  353,  347,  344,  315,
          308,  322,  344,  343,  355,  357,  357,  315,
          295,  265,  316,  335,  337,  342,  304,  316,
          227,  311,  271,  292,  315,  304,  314,  278,

          305,  313,  259,  255,  294,  277,  302,  304,
          317,  358,  332,  311,  360,  373,  356,  302,
          329,  370,  382,  383,  375,  391,  377,  346,
          346,  359,  367,  400,  383,  381,  362,  351,
          348,  369,  364,  373,  387,  362,  360,  357,
          360,  375,  373,  368,  371,  393,  380,  368,
          353,  378,  369,  362,  371,  376,  394,  355,
          315,  355,  363,  348,  355,  358,  307,  332,

          475,  499,  462,  511,  508,  482,  480,  479,
          473,  473,  504,  513,  528,  539,  483,  504,
          436,  458,  470,  473,  462,  500,  515,  469,
          416,  427,  444,  469,  459,  478,  452,  438,
          401,  411,  429,  430,  443,  440,  466,  422,
          402,  422,  431,  429,  449,  451,  454,  423,
          405,  430,  427,  442,  453,  458,  446,  392,
          434,  440,  457,  463,  467,  457,  430,  441,

          870,  893,  919,  895,  954,  944,  926,  937,
          895,  865,  900,  914,  904,  961,  929,  958,
          900,  898,  916,  911,  939,  972,  958,  972,
          878,  881,  890,  885,  901,  922,  909,  912,
          905,  878,  900,  887,  901,  907,  912,  915,
          899,  925,  903,  911,  910,  922,  934,  922,
          887,  906,  927,  925,  934,  934,  916,  923,
          915,  911,  924,  935,  913,  900,  900,  873,

          -47,   -1,   -4,   -9,  -20,  -13,    5,   -9,
            0,   32,   23,   42,   18,   18,    7,  -18,
            8,   35,   44,   15,   26,   49,   59,  -12,
           -6,    9,   16,    0,  -10,  -11,    0,  -53,
          -32,   20,  -13,  -69,  -69,  -38,  -45,  -72,
           -8,   21,   -6,  -36,  -48,  -34,    2,  -16,
           18,   38,   -1,  -51,  -30,   -6,   38,   43,
            8,   68,   42,  -44,   20,   -9,   61,   51,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
            6,  -41,   30,  -22,   -5,  -72,   20,   88,
           63,   69,   23,   13,  -41,  -51,   12,   44,
           25,   -4,   -1,  -30,  -29,  -24,  -23,    4,
           18,   10,   -8,  -20,  -25,  -26,  -26,   -2,
            7,   11,   -1,   11,   -5,  -20,  -50,  -23,
           20,    0,   25,   13,   14,  -39,  -56,  -19,
            0,    0,    0,    0,    0,    0,    0,    0,

           74,   -7,    9,  -19,  -49,   11,  -41,  -10,
            8,    4, -137,  -60,  -59, -122,  -47,  -60,
          -30, -116,  -72, -100, -146, -161, -138, -112,
          -46,  -66,  -38,  -84,  -61, -112,  -64,  -84,
          -51,  -57,  -53,  -37,  -63,  -59,  -66,  -54,
          -57,  -51,  -74,  -59,  -76,  -86, -104,  -65,
          -55,   -3,  -52,  -73,  -72,  -87,  -50,  -89,
           15,  -89,  -13,  -29,  -62,  -50,  -93,  -55,

          -20,  -38,   25,   36,   -5,   13,  -19,  -26,
          -30,  -80,  -45,  -33,  -81,  -97,  -75,  -20,
          -44,  -97, -107, -108,  -98, -115, -102,  -60,
          -66,  -77,  -81, -116,  -95,  -99,  -88,  -71,
          -72,  -92,  -73,  -78, -107,  -78,  -88,  -76,
          -85,  -96,  -89,  -84,  -84, -120, -105,  -96,
          -77, -115,  -98,  -86,  -97, -109, -134,  -94,
          -37,  -75,  -94,  -70,  -79,  -89,  -21,  -52,

           40,    9,   58,   -3,    3,   29,   28,   31,
           40,   42,    6,   -6,  -37,  -43,   27,    2,
           80,   56,   39,   37,   46,   -4,  -20,   33,
          103,   87,   75,   37,   49,   28,   50,   76,
          119,  109,   88,   83,   63,   65,   32,   85,
          112,   91,   75,   80,   50,   47,   45,   80,
          107,   76,   84,   68,   45,   36,   50,  121,
           69,   69,   49,   41,   33,   44,   77,   44,

           42,   39,    7,   48,  -28,  -12,  -13,  -10,
           12,   71,   41,   38,   58,  -25,   11,  -26,
            0,   14,  -10,   37,   15,  -42,  -27,  -50,
           51,   52,   37,   70,   68,   26,   70,   60,
           -3,   63,   28,   73,   41,   38,   40,   41,
           18,  -46,   27,    1,   14,   10,   -5,   14,
           22,   -8,  -44,  -33,  -44,  -43,  -40,  -42,
          -25,  -28,  -35,  -57,    3,  -11,    8,   15,

          -40,  -39,  -36,  -20,   -1,    8,   -7,  -12,
          -23,  -17,   -2,  -21,    2,   20,   23,   17,
          -14,  -20,  -25,    2,   -6,  -10,  -18,    8,
          -19,    8,   11,   30,   39,   46,   27,   46,
            2,  -22,   41,  109,  110,   71,   64,   61,
          -21,  -21,   25,   68,   85,   64,   11,   -2,
          -59,  -45,   19,   81,   57,   22,  -40,  -78,
          -78, -127,  -79,   31,  -56,  -10, -108, -125,
        };
    }
}
