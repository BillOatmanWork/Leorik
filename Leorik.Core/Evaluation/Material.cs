using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          123,  160,   97,  137,  120,  174,   98,   39,
           74,   76,  107,  106,  144,  148,  107,   74,
           61,   85,   82,  102,  103,   96,   97,   68,
           53,   62,   78,   90,   96,   90,   86,   61,
           54,   57,   70,   68,   79,   87,  100,   72,
           51,   66,   64,   67,   70,  105,  107,   68,
          100,  100,  100,  100,  100,  100,  100,  100,

          156,  240,  254,  269,  316,  237,  274,  206,
          249,  271,  396,  344,  336,  384,  311,  300,
          284,  379,  369,  393,  421,  438,  403,  360,
          317,  358,  351,  394,  375,  407,  361,  354,
          327,  339,  361,  353,  372,  365,  358,  332,
          325,  340,  362,  361,  372,  375,  374,  332,
          308,  275,  335,  349,  351,  356,  314,  327,
          231,  327,  287,  306,  332,  315,  330,  287,

          295,  303,  239,  237,  282,  265,  293,  297,
          302,  337,  316,  296,  350,  361,  342,  287,
          308,  355,  365,  367,  361,  378,  361,  329,
          330,  336,  350,  381,  365,  360,  342,  332,
          333,  353,  340,  358,  366,  342,  339,  345,
          342,  355,  355,  344,  351,  370,  361,  347,
          342,  359,  349,  341,  345,  357,  370,  336,
          305,  342,  340,  330,  341,  327,  296,  317,

          450,  474,  434,  486,  483,  458,  456,  455,
          451,  451,  481,  489,  505,  519,  460,  481,
          412,  434,  445,  448,  436,  476,  494,  445,
          397,  408,  422,  445,  434,  454,  429,  416,
          386,  393,  412,  411,  425,  422,  445,  402,
          387,  409,  417,  415,  434,  437,  437,  405,
          390,  415,  415,  428,  440,  441,  427,  373,
          418,  426,  443,  449,  453,  437,  414,  423,

          866,  882,  911,  885,  951,  939,  923,  935,
          886,  856,  890,  904,  894,  957,  921,  954,
          890,  888,  908,  898,  932,  967,  953,  963,
          869,  875,  881,  880,  894,  914,  900,  907,
          901,  870,  896,  883,  897,  900,  904,  907,
          893,  920,  897,  906,  905,  916,  928,  915,
          883,  900,  923,  916,  926,  926,  910,  918,
          910,  909,  920,  929,  908,  893,  893,  864,

          -48,    5,    1,   -6,  -21,  -13,    8,   -9,
            4,   36,   25,   47,   18,   16,    4,  -20,
           12,   39,   50,   15,   28,   53,   63,  -13,
           -3,   10,   16,   -3,  -13,  -16,   -4,  -60,
          -35,   22,  -16,  -77,  -76,  -42,  -49,  -78,
           -6,   22,   -6,  -36,  -48,  -36,    2,  -20,
           22,   39,    2,  -46,  -26,   -2,   39,   41,
            5,   70,   42,  -42,   23,  -12,   59,   45,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
           -3,  -44,   26,  -30,   -8,  -90,   10,   83,
           61,   68,   23,   13,  -42,  -50,   11,   42,
           24,   -7,   -3,  -32,  -32,  -25,  -26,    2,
           15,    7,  -10,  -23,  -28,  -28,  -29,   -3,
            7,    7,   -3,   10,   -5,  -22,  -54,  -23,
           22,    0,   20,   18,   18,  -36,  -58,  -18,
            0,    0,    0,    0,    0,    0,    0,    0,

           80,   -2,   15,  -18,  -54,   14,  -43,   -9,
            7,    1, -145,  -65,  -64, -132,  -53,  -66,
          -35, -121,  -81, -108, -154, -172, -146, -122,
          -55,  -84,  -53, -103,  -80, -125,  -82,  -96,
          -69,  -69,  -72,  -55,  -83,  -77,  -78,  -71,
          -75,  -69,  -92,  -77,  -92, -104, -121,  -82,
          -67,  -12,  -71,  -84,  -84,  -99,  -58,  -97,
           17, -105,  -28,  -42,  -78,  -61, -108,  -61,

          -38,  -48,   24,   35,  -14,    5,  -30,  -43,
          -37,  -80,  -49,  -40,  -93, -107,  -81,  -27,
          -43, -101, -110, -111, -105, -122, -106,  -64,
          -73,  -71,  -84, -116,  -96,  -97,  -86,  -74,
          -82,  -95,  -67,  -82, -104,  -74,  -87,  -88,
          -88,  -96,  -89,  -78,  -82, -115, -105,  -98,
          -91, -114,  -97,  -82,  -90, -111, -130, -101,
          -56,  -89,  -91,  -75,  -89,  -77,  -36,  -69,

           35,    3,   57,   -9,   -4,   22,   22,   24,
           32,   33,   -2,  -13,  -45,  -55,   21,   -6,
           74,   49,   34,   31,   42,  -11,  -29,   28,
           90,   75,   66,   30,   43,   22,   43,   67,
          102,   95,   73,   70,   49,   52,   21,   74,
           95,   71,   56,   61,   32,   29,   30,   66,
           90,   58,   62,   49,   25,   21,   37,  107,
           53,   50,   29,   22,   13,   32,   61,   31,

           29,   41,    4,   52,  -39,  -20,  -26,  -24,
           12,   72,   44,   40,   63,  -35,   10,  -34,
            1,   16,  -11,   45,   14,  -49,  -31,  -52,
           51,   50,   40,   66,   66,   29,   73,   55,
          -13,   66,   21,   65,   34,   36,   40,   41,
           12,  -54,   21,   -5,    8,    2,  -11,   10,
           13,  -15,  -54,  -35,  -45,  -50,  -49,  -53,
          -34,  -44,  -50,  -66,  -10,  -20,    2,   15,

          -42,  -43,  -40,  -21,    3,   13,   -7,  -14,
          -25,  -24,   -6,  -30,    0,   20,   26,   23,
          -16,  -25,  -33,    0,  -11,  -15,  -24,   12,
          -20,    7,   11,   31,   42,   52,   32,   57,
            6,  -25,   44,  119,  118,   76,   70,   69,
          -22,  -22,   25,   68,   85,   67,   13,    3,
          -63,  -47,   13,   74,   52,   18,  -41,  -76,
          -82, -129,  -78,   30,  -57,   -6, -105, -124,
        };
    }
}
