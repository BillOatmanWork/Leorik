using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          121,  160,   97,  135,  121,  170,   96,   37,
           72,   74,  106,  106,  144,  148,  106,   72,
           59,   83,   80,  101,  102,   95,   95,   66,
           52,   61,   76,   89,   95,   89,   85,   60,
           53,   56,   69,   68,   79,   86,   99,   72,
           49,   65,   62,   66,   68,  103,  105,   67,
          100,  100,  100,  100,  100,  100,  100,  100,

          154,  242,  257,  269,  314,  237,  274,  204,
          247,  270,  392,  342,  334,  380,  308,  297,
          282,  375,  364,  389,  417,  434,  397,  356,
          313,  350,  344,  387,  366,  401,  353,  348,
          320,  334,  353,  345,  364,  357,  352,  325,
          317,  332,  354,  353,  364,  367,  366,  324,
          303,  272,  327,  341,  343,  348,  311,  322,
          231,  319,  281,  300,  324,  310,  321,  283,

          298,  305,  246,  243,  285,  267,  294,  297,
          308,  348,  322,  302,  353,  365,  348,  294,
          320,  360,  373,  373,  366,  381,  368,  337,
          336,  351,  357,  391,  374,  371,  353,  343,
          341,  361,  355,  365,  379,  353,  351,  351,
          352,  368,  365,  359,  362,  385,  371,  360,
          347,  370,  362,  352,  360,  366,  384,  344,
          310,  350,  352,  342,  349,  342,  299,  325,

          454,  478,  439,  490,  487,  463,  461,  459,
          453,  453,  483,  492,  509,  522,  463,  484,
          415,  437,  449,  452,  440,  480,  497,  449,
          398,  409,  425,  448,  438,  458,  432,  418,
          385,  394,  412,  412,  426,  423,  447,  404,
          387,  407,  415,  414,  433,  436,  437,  406,
          388,  414,  412,  426,  438,  441,  428,  373,
          417,  424,  441,  446,  451,  435,  412,  422,

          869,  889,  918,  892,  955,  944,  927,  937,
          892,  863,  898,  912,  902,  962,  928,  959,
          897,  895,  915,  909,  940,  973,  958,  971,
          875,  880,  888,  885,  901,  921,  907,  912,
          906,  877,  901,  889,  902,  907,  910,  913,
          899,  925,  903,  910,  910,  921,  933,  921,
          887,  906,  928,  922,  930,  932,  914,  922,
          915,  913,  925,  934,  912,  898,  898,  870,

          -48,    3,   -1,   -7,  -20,  -12,    7,   -9,
            3,   34,   23,   43,   18,   16,    5,  -19,
           10,   37,   47,   14,   26,   51,   61,  -12,
           -4,    9,   16,   -1,  -12,  -13,   -2,  -56,
          -33,   21,  -14,  -74,  -72,  -40,  -47,  -75,
           -7,   22,   -6,  -36,  -49,  -34,    2,  -18,
           20,   39,    1,  -47,  -26,   -2,   39,   40,
            4,   69,   41,  -42,   22,  -11,   59,   45,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
            0,  -43,   28,  -28,   -8,  -83,   14,   85,
           63,   70,   24,   14,  -41,  -49,   13,   45,
           26,   -5,    0,  -30,  -30,  -24,  -23,    4,
           17,    9,   -8,  -21,  -26,  -27,  -28,   -2,
            8,    9,   -2,   11,   -3,  -20,  -52,  -22,
           23,    2,   22,   21,   21,  -34,  -55,  -17,
            0,    0,    0,    0,    0,    0,    0,    0,

           79,   -3,   14,  -16,  -49,   15,  -40,   -8,
           10,    5, -138,  -60,  -59, -125,  -48,  -61,
          -30, -115,  -73, -101, -147, -164, -138, -115,
          -47,  -72,  -42,  -90,  -67, -115,  -69,  -86,
          -57,  -60,  -59,  -43,  -69,  -64,  -69,  -59,
          -62,  -57,  -79,  -64,  -80,  -91, -108,  -69,
          -58,   -5,  -59,  -71,  -71,  -87,  -52,  -90,
           18,  -94,  -18,  -32,  -66,  -53,  -96,  -56,

          -33,  -47,   21,   33,  -13,    5,  -27,  -38,
          -38,  -87,  -52,  -42,  -91, -107,  -83,  -28,
          -52, -103, -114, -115, -107, -123, -110,  -69,
          -75,  -84,  -88, -125, -103, -105,  -95,  -80,
          -84, -101,  -81,  -87, -116,  -85,  -96,  -88,
          -95, -106,  -98,  -91,  -91, -129, -114, -106,
          -90, -123, -107,  -91, -102, -116, -141, -103,
          -53,  -90, -100,  -81,  -91,  -89,  -33,  -67,

           34,    1,   53,  -11,   -5,   20,   19,   23,
           32,   34,   -3,  -14,  -46,  -55,   19,   -7,
           72,   48,   32,   29,   40,  -13,  -30,   25,
           92,   77,   65,   29,   41,   20,   42,   68,
          106,   97,   76,   72,   52,   53,   22,   75,
           98,   77,   61,   66,   36,   33,   34,   69,
           95,   62,   69,   54,   31,   25,   39,  110,
           58,   55,   35,   28,   18,   37,   66,   35,

           38,   42,    7,   52,  -31,  -14,  -18,  -15,
           14,   74,   45,   41,   62,  -28,   13,  -28,
            2,   17,   -8,   43,   16,  -44,  -27,  -50,
           53,   53,   40,   70,   69,   29,   74,   58,
           -8,   67,   26,   70,   39,   38,   42,   43,
           16,  -49,   25,    1,   12,    7,   -6,   14,
           19,  -11,  -48,  -30,  -39,  -45,  -44,  -47,
          -29,  -37,  -43,  -62,   -3,  -15,    6,   17,

          -42,  -41,  -38,  -20,    1,   11,   -6,  -13,
          -24,  -21,   -5,  -26,    0,   20,   24,   21,
          -14,  -23,  -29,    1,   -9,  -13,  -21,   11,
          -19,    8,   11,   30,   41,   49,   30,   52,
            5,  -24,   42,  114,  114,   74,   68,   65,
          -21,  -21,   25,   68,   86,   65,   12,    2,
          -61,  -46,   15,   75,   52,   18,  -42,  -75,
          -81, -128,  -77,   30,  -57,   -7, -105, -124,
        };
    }
}
