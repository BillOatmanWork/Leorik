using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          124,  164,  100,  138,  124,  171,   98,   40,
           72,   74,  106,  106,  144,  148,  105,   73,
           60,   83,   81,  101,  102,   95,   96,   67,
           52,   60,   76,   88,   95,   89,   85,   60,
           53,   55,   68,   66,   78,   85,   98,   71,
           49,   64,   62,   65,   68,  104,  105,   68,
          100,  100,  100,  100,  100,  100,  100,  100,

          154,  243,  258,  270,  314,  238,  274,  204,
          248,  270,  391,  342,  334,  379,  308,  297,
          282,  376,  364,  388,  417,  433,  397,  355,
          312,  350,  343,  386,  366,  400,  352,  347,
          319,  333,  352,  344,  363,  357,  351,  324,
          316,  331,  353,  352,  363,  366,  365,  323,
          302,  271,  326,  340,  342,  347,  310,  322,
          231,  318,  279,  299,  323,  310,  321,  283,

          297,  306,  248,  244,  286,  268,  295,  296,
          308,  348,  322,  302,  353,  365,  347,  294,
          320,  361,  373,  373,  366,  382,  369,  337,
          336,  351,  357,  391,  374,  371,  353,  343,
          341,  361,  355,  365,  379,  353,  351,  350,
          351,  367,  365,  359,  362,  384,  371,  360,
          346,  370,  361,  351,  360,  366,  384,  344,
          309,  349,  351,  341,  348,  342,  299,  324,

          455,  479,  441,  491,  488,  464,  462,  460,
          454,  454,  484,  493,  510,  522,  464,  485,
          416,  438,  450,  453,  441,  481,  497,  450,
          398,  409,  426,  449,  439,  459,  433,  419,
          385,  394,  412,  412,  426,  423,  448,  404,
          386,  406,  415,  413,  433,  436,  437,  406,
          388,  414,  412,  426,  437,  441,  428,  373,
          417,  424,  440,  446,  451,  435,  412,  422,

          870,  893,  921,  897,  957,  947,  929,  938,
          894,  866,  902,  915,  906,  964,  931,  960,
          900,  899,  919,  913,  944,  976,  961,  973,
          878,  884,  892,  890,  905,  925,  911,  915,
          908,  881,  904,  892,  905,  910,  914,  916,
          901,  927,  906,  913,  913,  924,  936,  923,
          888,  908,  930,  924,  933,  934,  916,  923,
          917,  914,  927,  936,  914,  900,  899,  871,

          -48,    2,   -2,   -7,  -20,  -12,    7,   -9,
            2,   33,   23,   42,   18,   17,    6,  -18,
           10,   36,   46,   14,   25,   50,   60,  -12,
           -5,    9,   16,   -1,  -11,  -13,   -1,  -55,
          -33,   20,  -14,  -72,  -71,  -39,  -46,  -74,
           -7,   22,   -6,  -36,  -48,  -34,    2,  -18,
           20,   38,    1,  -48,  -27,   -2,   40,   40,
            4,   69,   41,  -42,   22,  -11,   59,   45,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
            4,  -40,   30,  -24,   -6,  -78,   18,   88,
           64,   71,   25,   14,  -40,  -49,   13,   46,
           26,   -5,   -1,  -30,  -30,  -24,  -24,    4,
           17,   10,   -8,  -20,  -26,  -26,  -27,   -2,
            8,   10,   -1,   13,   -2,  -19,  -51,  -22,
           24,    2,   23,   22,   23,  -34,  -55,  -16,
            0,    0,    0,    0,    0,    0,    0,    0,

           78,   -3,   14,  -16,  -48,   15,  -39,   -8,
           11,    6, -137,  -58,  -58, -123,  -46,  -59,
          -29, -114,  -72, -100, -146, -162, -137, -113,
          -46,  -70,  -40,  -89,  -66, -113,  -67,  -84,
          -55,  -58,  -57,  -41,  -68,  -63,  -67,  -57,
          -60,  -55,  -78,  -62,  -78,  -89, -106,  -67,
          -56,   -3,  -56,  -69,  -69,  -86,  -50,  -89,
           18,  -92,  -16,  -30,  -64,  -51,  -95,  -55,

          -31,  -46,   21,   32,  -12,    6,  -26,  -36,
          -37,  -86,  -52,  -41,  -90, -106,  -82,  -27,
          -51, -103, -114, -115, -106, -122, -109,  -68,
          -74,  -84,  -88, -124, -102, -105,  -94,  -79,
          -82, -100,  -80,  -86, -115,  -84,  -95,  -86,
          -94, -104,  -96,  -90,  -90, -127, -113, -105,
          -88, -123, -105,  -90, -100, -116, -141, -102,
          -51,  -88,  -98,  -80,  -89,  -88,  -31,  -65,

           32,    0,   51,  -12,   -6,   19,   18,   22,
           31,   33,   -4,  -15,  -47,  -55,   18,   -8,
           71,   47,   31,   28,   38,  -14,  -31,   24,
           92,   76,   65,   28,   40,   19,   41,   67,
          106,   97,   76,   72,   52,   53,   21,   75,
           99,   78,   62,   67,   37,   34,   34,   69,
           95,   63,   70,   55,   32,   25,   39,  110,
           58,   56,   36,   29,   19,   37,   66,   34,

           41,   43,    9,   53,  -28,  -11,  -15,  -12,
           14,   75,   46,   42,   63,  -26,   14,  -26,
            3,   18,   -7,   43,   18,  -42,  -26,  -49,
           54,   54,   41,   72,   71,   30,   74,   59,
           -6,   68,   28,   72,   41,   39,   43,   43,
           18,  -47,   27,    2,   14,    9,   -4,   15,
           21,   -8,  -45,  -28,  -37,  -43,  -42,  -45,
          -26,  -33,  -39,  -56,    0,  -13,    7,   17,

          -42,  -40,  -37,  -20,    0,   10,   -6,  -13,
          -24,  -20,   -4,  -25,    1,   20,   24,   20,
          -14,  -22,  -28,    1,   -8,  -12,  -20,   10,
          -19,    8,   11,   30,   40,   48,   29,   50,
            4,  -23,   42,  113,  113,   73,   67,   64,
          -21,  -21,   25,   68,   86,   65,   12,    1,
          -60,  -46,   16,   76,   53,   18,  -43,  -76,
          -81, -128,  -77,   31,  -56,   -7, -105, -124,
        };
    }
}
