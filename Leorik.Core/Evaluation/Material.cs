using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          121,  162,   99,  135,  123,  165,   94,   38,
           70,   73,  105,  104,  142,  148,  105,   71,
           58,   81,   79,  100,  100,   94,   94,   65,
           50,   59,   74,   86,   93,   86,   82,   58,
           53,   53,   67,   66,   77,   83,   95,   71,
           51,   65,   59,   71,   74,  106,  106,   70,
          100,  100,  100,  100,  100,  100,  100,  100,

          154,  241,  256,  267,  309,  235,  270,  202,
          243,  265,  385,  336,  328,  372,  302,  290,
          277,  370,  358,  382,  411,  426,  391,  349,
          307,  340,  335,  377,  356,  393,  343,  340,
          310,  326,  343,  335,  353,  347,  344,  315,
          307,  322,  344,  344,  355,  357,  356,  314,
          295,  265,  317,  336,  338,  342,  304,  316,
          227,  312,  272,  293,  316,  304,  314,  278,

          305,  313,  258,  254,  293,  276,  302,  303,
          316,  357,  331,  310,  360,  372,  355,  301,
          329,  370,  382,  382,  374,  390,  377,  346,
          345,  359,  366,  399,  382,  380,  361,  350,
          347,  368,  363,  373,  386,  361,  359,  356,
          359,  373,  373,  368,  370,  392,  378,  367,
          352,  378,  369,  362,  371,  375,  393,  355,
          315,  355,  363,  348,  354,  358,  306,  331,

          475,  499,  462,  511,  508,  482,  481,  479,
          474,  473,  504,  513,  528,  539,  484,  504,
          436,  458,  470,  473,  462,  500,  515,  470,
          416,  428,  444,  469,  459,  478,  452,  438,
          402,  412,  430,  430,  444,  440,  466,  422,
          403,  422,  431,  429,  449,  451,  454,  423,
          406,  431,  428,  442,  454,  459,  446,  393,
          435,  441,  457,  464,  468,  457,  431,  442,

          871,  893,  919,  895,  954,  944,  927,  937,
          896,  865,  900,  913,  904,  961,  929,  959,
          900,  898,  916,  910,  938,  972,  959,  973,
          878,  880,  889,  885,  901,  921,  909,  912,
          905,  878,  900,  887,  901,  906,  911,  915,
          899,  925,  903,  911,  910,  921,  933,  922,
          887,  906,  928,  926,  935,  935,  917,  923,
          915,  912,  925,  936,  913,  901,  900,  873,

          -46,    0,   -4,   -8,  -20,  -12,    5,   -9,
            1,   32,   23,   41,   18,   18,    7,  -18,
            8,   35,   44,   14,   25,   49,   59,  -12,
           -6,    9,   16,    0,  -10,  -11,    0,  -53,
          -32,   19,  -13,  -68,  -69,  -38,  -45,  -72,
           -8,   21,   -6,  -36,  -48,  -34,    1,  -16,
           19,   37,   -1,  -51,  -30,   -6,   37,   42,
            8,   68,   42,  -44,   21,   -9,   61,   51,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
            4,  -42,   28,  -24,   -7,  -74,   18,   86,
           64,   69,   24,   14,  -41,  -51,   12,   45,
           26,   -4,    0,  -30,  -29,  -24,  -23,    4,
           18,   10,   -7,  -20,  -25,  -26,  -26,   -1,
            7,   11,   -1,   10,   -5,  -20,  -49,  -23,
           20,    0,   24,   11,   12,  -38,  -57,  -19,
            0,    0,    0,    0,    0,    0,    0,    0,

           74,   -7,    9,  -19,  -49,   11,  -41,  -10,
            8,    4, -138,  -59,  -59, -122,  -47,  -60,
          -30, -116,  -73, -100, -147, -161, -138, -112,
          -46,  -66,  -38,  -85,  -61, -112,  -63,  -84,
          -51,  -57,  -53,  -38,  -64,  -59,  -67,  -54,
          -57,  -51,  -74,  -60,  -76,  -86, -103,  -64,
          -55,   -3,  -53,  -74,  -73,  -87,  -50,  -89,
           15,  -90,  -13,  -29,  -62,  -50,  -93,  -55,

          -21,  -39,   25,   36,   -6,   12,  -19,  -26,
          -30,  -81,  -46,  -34,  -81,  -97,  -75,  -20,
          -44,  -97, -107, -108,  -98, -115, -103,  -61,
          -67,  -77,  -81, -116,  -95,  -99,  -88,  -71,
          -72,  -92,  -73,  -79, -107,  -78,  -88,  -76,
          -84,  -95,  -89,  -84,  -84, -120, -104,  -95,
          -78, -116,  -98,  -87,  -98, -109, -134,  -94,
          -38,  -76,  -95,  -71,  -80,  -90,  -21,  -53,

           40,    9,   58,   -3,    3,   29,   28,   31,
           40,   42,    6,   -6,  -37,  -43,   27,    2,
           80,   56,   39,   37,   46,   -4,  -20,   33,
          103,   87,   75,   37,   49,   29,   50,   76,
          119,  109,   88,   83,   63,   65,   32,   86,
          112,   92,   75,   80,   50,   47,   46,   81,
          107,   76,   84,   68,   45,   36,   51,  121,
           69,   68,   48,   40,   32,   44,   77,   43,

           42,   39,    7,   48,  -27,  -11,  -13,  -10,
           12,   71,   41,   38,   58,  -25,   12,  -25,
            0,   14,  -10,   37,   14,  -42,  -27,  -50,
           51,   52,   36,   68,   67,   26,   70,   61,
           -3,   63,   27,   70,   39,   38,   41,   42,
           19,  -45,   26,    0,   14,   10,   -4,   15,
           22,   -8,  -44,  -34,  -45,  -43,  -40,  -42,
          -25,  -29,  -37,  -59,    2,  -11,    8,   16,

          -40,  -39,  -36,  -20,   -1,    8,   -7,  -12,
          -23,  -17,   -2,  -21,    2,   20,   23,   17,
          -14,  -20,  -25,    2,   -6,  -10,  -18,    8,
          -19,    8,   11,   29,   38,   46,   27,   46,
            2,  -22,   41,  109,  110,   70,   64,   61,
          -21,  -21,   25,   67,   85,   64,   11,   -1,
          -59,  -45,   18,   81,   57,   22,  -40,  -78,
          -78, -127,  -79,   31,  -56,  -10, -108, -125,
        };
    }
}
