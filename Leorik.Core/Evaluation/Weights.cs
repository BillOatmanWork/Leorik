namespace Leorik.Core
{
    public static class Weights
    {
        /*
        Rebalanced the Weights of Leorik 2.3 so that the Mobility table does not encode material.
        The used balancing scheme simply assumes 33% of the theoretical maximum of available moves as neutral.

        Score of Leorik-2.3.1 vs Leorik-2.3: 2673 - 2431 - 3902  [0.513] 9006
        Elo difference: 9.3 +/- 5.4, LOS: 100.0 %, DrawRatio: 43.3 %
        */

        public static readonly short[] PhaseValues = new short[6] { 0, 190, 184, 347, 1057, 0 };

        public static readonly (short, short)[] Features = new (short, short)[10 * 64]{
            //Pawns
            ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0),
            ( 316, 160), ( 161, 295), ( 220, 221), ( 262, 168), ( 206, 158), ( 205, 189), ( 105, 350), ( 155, 320),
            (  71, 179), ( 105, 163), (  92, 138), ( 149, 101), ( 155,  59), ( 239, -62), ( 208,  94), ( 146, 123),
            (  72, 146), ( 107, 133), (  76, 112), ( 111,  83), ( 125,  64), ( 129,  50), ( 118,  77), ( 111, 118),
            (  61, 145), (  85, 135), ( 105,  66), ( 116,  34), ( 129,  62), ( 122,  66), ( 109,  83), ( 101,  86),
            (  58, 122), (  81, 106), (  70,  90), (  86, 105), (  91,  79), ( 101,  79), ( 116,  50), (  93,  77),
            (  53, 137), (  76, 123), (  74, 101), (  78,  93), (  91, 117), ( 150,  38), ( 158,   4), ( 107,  56),
            ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0), ( 100,   0),
            //Knights
            ( 171, 261), ( 404, 145), ( 395, 147), ( 598, -60), ( 527,  38), ( 439, 128), ( 442, 107), ( 329,  52),
            ( 412,  87), ( 404, 183), ( 482, 110), ( 514,  89), ( 504,  97), ( 563, -23), ( 408, 117), ( 520, -25),
            ( 394, 159), ( 470, 116), ( 471, 164), ( 516, 122), ( 661, -89), ( 627, -44), ( 506,  75), ( 452,  99),
            ( 430, 131), ( 451, 144), ( 476, 176), ( 505, 135), ( 469, 163), ( 521, 117), ( 471, 130), ( 501,  32),
            ( 414, 143), ( 421, 164), ( 472, 152), ( 450, 194), ( 468, 174), ( 473, 139), ( 478,  94), ( 439, 102),
            ( 397, 158), ( 438, 155), ( 456, 150), ( 444, 178), ( 466, 149), ( 465, 125), ( 472, 106), ( 412, 107),
            ( 403,  80), ( 408, 130), ( 427, 125), ( 454, 101), ( 445, 132), ( 442,  98), ( 427,  81), ( 435,  57),
            ( 344,  62), ( 428,  71), ( 409, 100), ( 400, 149), ( 419, 123), ( 434,  74), ( 418,  46), ( 371,  59),
            //Bishops
            ( 440, 180), ( 452, 184), ( 466, 158), ( 429, 192), ( 461, 143), ( 404, 244), ( 506, 134), ( 471, 139),
            ( 409, 190), ( 464, 158), ( 454, 158), ( 496, 127), ( 492, 137), ( 433, 217), ( 450, 192), ( 444, 167),
            ( 465, 155), ( 476, 149), ( 487, 141), ( 511,  96), ( 534,  91), ( 595,  48), ( 540,  93), ( 498, 113),
            ( 455, 153), ( 472, 143), ( 480, 157), ( 503, 160), ( 482, 184), ( 490, 143), ( 463, 158), ( 474, 141),
            ( 452, 161), ( 473, 149), ( 476, 168), ( 491, 177), ( 500, 142), ( 464, 163), ( 479, 138), ( 489, 112),
            ( 471, 153), ( 502, 131), ( 476, 166), ( 479, 173), ( 472, 165), ( 495, 124), ( 503, 114), ( 496, 106),
            ( 508,  78), ( 470, 158), ( 497, 112), ( 459, 168), ( 479, 126), ( 500,  93), ( 504,  91), ( 470, 108),
            ( 438, 197), ( 502,  67), ( 465, 156), ( 469, 122), ( 483, 122), ( 453, 155), ( 483, 103), ( 441, 162),
            //Rooks
            ( 639, 415), ( 663, 392), ( 669, 381), ( 677, 369), ( 743, 290), ( 759, 277), ( 747, 274), ( 781, 227),
            ( 616, 443), ( 598, 467), ( 662, 405), ( 696, 381), ( 711, 348), ( 788, 223), ( 725, 293), ( 802, 199),
            ( 587, 475), ( 620, 430), ( 607, 460), ( 665, 378), ( 714, 321), ( 794, 214), ( 774, 237), ( 727, 278),
            ( 567, 471), ( 583, 449), ( 619, 424), ( 621, 413), ( 614, 412), ( 681, 339), ( 690, 325), ( 592, 420),
            ( 559, 455), ( 570, 445), ( 601, 420), ( 606, 404), ( 595, 414), ( 610, 391), ( 647, 338), ( 608, 371),
            ( 560, 437), ( 589, 399), ( 567, 430), ( 594, 396), ( 617, 365), ( 619, 351), ( 659, 307), ( 594, 381),
            ( 573, 384), ( 577, 388), ( 593, 396), ( 598, 398), ( 615, 362), ( 609, 357), ( 654, 284), ( 548, 381),
            ( 595, 389), ( 599, 385), ( 614, 386), ( 625, 372), ( 635, 353), ( 628, 362), ( 559, 454), ( 601, 352),
            //Queens
            (1386, 371), (1430, 368), (1437, 369), (1440, 383), (1438, 407), (1477, 313), (1455, 334), (1474, 277),
            (1378, 406), (1360, 492), (1360, 535), (1414, 469), (1403, 501), (1471, 351), (1393, 460), (1473, 321),
            (1401, 332), (1402, 368), (1372, 514), (1415, 459), (1434, 474), (1531, 316), (1484, 325), (1488, 317),
            (1398, 343), (1393, 402), (1374, 454), (1376, 544), (1402, 504), (1414, 454), (1429, 433), (1417, 411),
            (1408, 317), (1389, 388), (1418, 352), (1428, 365), (1405, 418), (1429, 358), (1445, 309), (1437, 335),
            (1411, 252), (1432, 255), (1410, 359), (1419, 310), (1433, 274), (1439, 312), (1454, 308), (1450, 232),
            (1422, 221), (1412, 273), (1434, 240), (1437, 233), (1440, 238), (1476,  98), (1459,  91), (1400, 177),
            (1441, 160), (1408, 239), (1435, 185), (1442, 240), (1432, 196), (1404, 171), (1349, 222), (1361, 174),
            //Kings
            ( -56, -68), (  23, -30), (  48,  11), (  37,  34), (  72,  31), (  37,  12), (  37,  -7), (  19, -23),
            (  11, -43), (  69,  11), (  55,  69), (  52,  74), (  73,  69), (  74,  67), (  83,  46), (  15, -11),
            (  24,   9), (  16,  74), (  42,  78), (  39,  78), (  63,  89), (  84,  53), (  77,  43), (  12,  17),
            (  -3,  -1), (  33,  47), (  33,  61), (  -7, 116), (  35,  67), (  -4, 109), (  -1,  87), ( -61,  58),
            (   6, -50), (  31,  -8), (  -2,  61), ( -58, 131), ( -63, 135), ( -74, 144), ( -28,  68), ( -79,  52),
            (  -9, -46), (  61, -76), ( -41,  70), ( -75, 125), (-109, 160), (-119, 163), (  15, -24), ( -21, -47),
            ( 110,-228), (  47,-100), (  46, -53), ( -26,  28), ( -50,  67), (  12, -19), ( 100,-150), ( 126,-247),
            (  -3,-171), ( 109,-260), (  84,-189), (-107,  23), (  96,-224), (   2, -94), ( 137,-270), ( 129,-328),
            //Isolated Pawns
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            (   1, -10), (  27,   6), (  11,  -7), (  -9, -11), (  33,  14), (  10,  17), (  14,  10), ( -15,   4),
            (   4, -12), ( -14, -37), (  -9,  -8), (  17, -20), (  18,  10), (   7,   5), (  -8, -15), ( -23, -11),
            (  -2,   1), (   1, -34), (  22, -37), (  -4, -17), (  -6,  -4), (  23, -20), (   7, -11), ( -15, -17),
            ( -11,   5), ( -20,  -2), ( -25,  23), ( -37,  40), ( -37,  14), ( -21,   7), ( -19,   2), ( -45,  24),
            (  -6,  15), ( -14,  -5), (  -7,   4), ( -11, -10), ( -33,  22), (  21, -35), (  -5,   0), ( -34,  22),
            (  -9,  15), ( -20,  -3), (  20, -28), ( -37,  22), ( -20,   7), ( -30,  18), ( -13,  10), ( -35,  24),
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            //Passed Pawns
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            (  22,  16), (   6,  29), (  12,  22), (  16,  17), (  11,  16), (  11,  19), (   1,  35), (   6,  32),
            ( 127, 129), ( 131, 115), ( 116,  88), (  43,  55), (  74,  32), ( 102,  92), (  76,  88), (  66, 127),
            (  56,  90), (  47,  73), (  41,  76), (  25,  54), (   8,  41), (  44,  64), (  43,  90), (  25, 105),
            (  25,  49), (  26,  38), ( -13,  80), (   0,  54), (  -2,  32), (  -1,  59), (  17,  67), (  20,  70),
            (  -8,  23), (  -5,  24), (  -2,  22), (  -5,  -4), (   4,   1), (  -1,  24), (  21,  10), (  63, -49),
            (  18, -22), (  13,   5), (  -4,  12), ( -27,   7), (   8,  -6), (  -3,   6), (  27, -11), (  59, -50),
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            //Protected Pawns
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            (  14,  13), (  40,  25), (  25,  15), (  25,  15), (  15,  10), (  11,  10), (  26,  24), (  20,  18),
            (  12,  10), (  24,  14), (  67,  -2), (  62,  27), (  65,  32), (  57,  39), (  -3,   0), (   5,   8),
            ( -11,  33), (   2,  14), (  39, -31), (  16,   9), (  43,   1), (  10,  18), (  16,  -5), (   8, -17),
            ( -12,  29), (  13,  -3), (   5,  14), (  17,  30), (   4,  22), (   0,  15), (  26, -18), (   5,  -6),
            (   9,  16), (  13,  33), (  21,   3), (  19,  25), (  22,  37), (  21,   8), (  28, -10), (  40, -28),
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            //Connected Pawns
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
            (   7,   6), (  14,  12), (  11,   9), (   8,   7), (   9,   8), (   6,   5), (   7,   6), (   6,   5),
            (  35,  29), (  63,  46), (  54,  34), (  51,  35), (  52,  36), (  51,  36), (  57,  48), (  33,  30),
            (   6,  33), (  16,  41), (  34,  23), (  53,  15), (  80,  -5), (  59,   2), (  32,  23), (  17,  15),
            (   5,  -3), (  15,  -3), (   2,  26), (  15,  37), (  10,  10), (  43, -16), (  -6,   4), (  20,  -2),
            (   3,   1), (  -1,  19), (   9,  14), (  19, -28), (  19,  -8), (   7,  25), (   0,  -6), (  26, -17),
            (  14,  15), (  -2, -15), (   6,  27), (  16, -34), (  17,   5), ( -13,  -7), ( -10,  39), (  13, -21),
            (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0), (   0,   0),
        };

        //Max possible moves:
        //Pawn      = 12 + zero = 13  [00..12]
        //Knight    =  8 + zero =  9  [13..21]
        //Bishop    = 13 + zero = 14  [22..35]
        //Rook      = 14 + zero = 15  [36..50]
        //Queen     = 27 + zero = 28  [51..78]
        //King      =  8 + zero =  9  [79..87]
        //--------------
        //TOTAL     = 82        = 88
        //static short[] PieceMobilityIndices = new short[8] { 0, 0, 13, 22, 36, 51, 79, 88 };

        public static (short, short)[] Mobility = new (short, short)[88]
        {
            //Pawn:
            (-8,-19), (0,0), (0,0), (0,0), (99,147), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0),
            //Knight:
            (0,0), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0), (0,0),
            //Bishop:
            (-18,-104), (-20,-56), (-6,-39), (-6,-23), (0,0), (3,13), (8,11), (9,15), (14,15), (23,6), (26,-5), (31,-12), (24,-25), (28,-19),
            //Rook:
            (-32,-13), (-24,-14), (-19,14), (-13,16), (-8,6), (0,0), (5,0), (16,-12), (23,-12), (28,-12), (34,-12), (41,-16), (54,-25), (64,-50), (62,-43),
            //Queen:
            (-11,-72), (-2,-80), (-1,-69), (-2,-70), (0,-95), (-2,-38), (-6,-10), (-4,-12), (-6,10), (0,0), (0,15), (3,14), (1,40), (4,33), (18,-5), (5,40), (4,49), (-5,67), (5,54), (12,23), (29,17), (20,21), (31,5), (28,9), (5,-7), (-9,-15), (-69,-50), (-72,-51),
            //King:
            (-17,-5), (-8,32), (-1,1), (0,0), (-14,10), (-11,-17), (-25,3), (-56,22), (-49,-28),
        };        
    }
}
